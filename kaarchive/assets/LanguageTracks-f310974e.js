import{_ as R,r as d,m as S,o as v,c as p,a as s,F as L,s as j,f as y,t as b,w as I,j as M,b as x,x as k,n as $,p as C,g as P}from"./index-7e32fd6c.js";const U=""+new URL("firstencounter/languagetracks/firstencounter-noaudio-poster.webp",import.meta.url).href;const i=f=>(C("data-v-4436e317"),f=f(),P(),f),A=i(()=>s("div",{class:"fs-3 text-light"},"First Encounter",-1)),B=i(()=>s("div",{class:"fs-4"},"Language Tracks",-1)),F={class:"d-flex flex-row justify-content-center flex-wrap my-1",style:{"margin-right":"-0.5rem !important","margin-left":"-0.5rem !important"}},N=["onClick"],q=["src"],D={class:"mt-2 d-flex flex-row justify-content-center flex-wrap"},z={class:"card p-2 me-2 mb-2 fw-bold language-name-container"},G={class:"language-name"},H=["href","download"],O=i(()=>s("i",{class:"bi bi-download"},null,-1)),W=[O],X={class:"card p-2 mb-2 d-flex flex-row"},J=i(()=>s("span",{class:"me-1 icon-vol"},[s("i",{class:"bi bi-volume-off-fill"})],-1)),K=i(()=>s("span",{class:"ms-1 icon-vol"},[s("i",{class:"bi bi-volume-up-fill"})],-1)),Q={class:"video-container"},Y={key:0,class:"video-container-overlay"},Z=i(()=>s("div",{class:"fs-4 mt-5"},"Select a language.",-1)),ee=[Z],se={key:1,class:"video-container-overlay"},te={class:"fs-4 my-5"},ae={class:"language-name"},ne=i(()=>s("div",{class:"spinner-border"},null,-1)),oe={__name:"LanguageTracks",setup(f){const g=d(null);d(null);const a=d("-"),_=d(50),l=d(-1);let c=!1,n=null;const m=new Map,T=new Set,h=["english","german","japanese","swedish","french"].sort(),E=e=>{if(a.value===e)return;const o=c,t=g.value;if(t.pause(),n&&n.pause(),m.has(e)){const r=m.get(e);r.addEventListener("canplaythrough",()=>{a.value===e&&(o&&t.play(),l.value=1)},{once:!0}),r.currentTime=t.currentTime}else if(!T.has(e)){l.value=0;const r=new XMLHttpRequest;r.open("GET",`./assets/firstencounter/languagetracks/languages/${e}.m4a`,!0),r.responseType="blob",r.onload=({target:w})=>{if(w.status==200){var u=new Audio(URL.createObjectURL(w.response));u.addEventListener("canplay",()=>{u.addEventListener("canplaythrough",()=>{a.value===e&&(o&&t.play(),l.value=1)},{once:!0}),m.set(e,u),a.value===e&&(l.value=1),u.currentTime=t.currentTime},{once:!0}),u.load()}},r.send()}a.value=e},V=()=>{n&&(n.volume=_.value/100)};return S(()=>{const e=g.value;window&&window.innerWidth>=992?e.src="/assets/firstencounter/languagetracks/firstencounter-noaudio-800.mp4":e.src="/assets/firstencounter/languagetracks/firstencounter-noaudio-540.mp4",e.addEventListener("canplaythrough",()=>{e.controls=!0}),e.addEventListener("play",()=>{const o=m.get(a.value);o.volume=_.value/100,o.play(),n=o,c=!0}),e.addEventListener("pause",()=>{n&&n.pause(),c=!1}),e.addEventListener("ended",()=>{c=!1}),e.addEventListener("timeupdate",()=>{if(!n||Math.abs(e.currentTime-n.currentTime)<.15)return;const o=c,t=a.value;e.pause(),n.addEventListener("canplaythrough",()=>{a.value===t&&o&&e.play()},{once:!0}),n.currentTime=e.currentTime}),e.load()}),(e,o)=>(v(),p(L,null,[A,B,s("div",F,[(v(!0),p(L,null,j(y(h),t=>(v(),p("div",{class:$(["flag-container mx-2 my-1",{"flag-container-active":a.value===t}]),key:t,onClick:r=>E(t)},[s("img",{class:"flag",src:`./assets/flags/${t}.svg`},null,8,q)],10,N))),128))]),s("div",D,[s("div",z,[s("span",G,b(a.value),1)]),s("a",{class:"card p-2 me-2 mb-2 dl-btn",href:`./assets/firstencounter/languagetracks/languages/${y(h)[a.value]}.m4a`,role:"button",download:`firstencounter-${y(h)[a.value]}`},W,8,H),s("div",X,[J,I(s("input",{type:"range",class:"form-range",min:"0",max:"100",step:"1","onUpdate:modelValue":o[0]||(o[0]=t=>_.value=t),onInput:V,style:{width:"200px"}},null,544),[[M,_.value]]),K])]),s("div",Q,[s("video",{ref_key:"videoRef",ref:g,muted:"",disableRemotePlayback:"",poster:U,preload:"auto"},null,512),l.value===-1?(v(),p("div",Y,ee)):x("",!0),l.value===0?(v(),p("div",se,[s("div",te,[k("Loading "),s("span",ae,b(a.value),1),k("...")]),ne])):x("",!0)])],64))}},ie=R(oe,[["__scopeId","data-v-4436e317"]]);export{ie as default};
